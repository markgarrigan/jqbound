var app=app||{};
$.extend(app,{saySomething:function(e){var n=$.Deferred();return confirm(e.speech||"Hello!")?n.resolve():n.reject(),n.promise()},doSomething:function(){var e=$.Deferred();return confirm("I did it!")?e.resolve():e.reject(),e.promise()},initModels:function(e){var n=String(e.models).split(",");n.forEach(function(e,n,o){$("[data-"+e+"]").each(function(){new Model($(this),e)})})},wait:function(e){return $.Deferred(function(n){setTimeout(n.resolve,e)})},methods:function(e){return e.split(",")},log:function(e){window.console&&console.log(e)}});
function DataBinder(t,e){var n=jQuery({}),a=t.data(e)+":change";return jQuery(document).on("change keyup","[data-"+e+"]",function(t){var o=jQuery(this);n.trigger(a,[o.data(e),o.val()])}),n.on(a,function(t,n,a){jQuery("[data-"+e+"="+n+"]").each(function(){var t=jQuery(this);t.is("input, textarea, select")||(t[0].textContent=a)})}),n}function Model(t,e){var n=new DataBinder(t,e),a={attributes:{},set:function(t,a){this.attributes[t]=a,n.trigger(e+":change",[t,a,this])},get:function(t){return this.attributes[t]},_binder:n};return n.on(e+":change",function(t,e,n,o){o!==a&&a.set(e,n)}),a}$(function(){var t=function(e,n){e.length&&$.when(app[e[0]](n)).then(function(){e.splice(0,1),t(e,n)})};$("[data-on-load]").each(function(){var e=$(this),n=e.data(),a=$.extend({element:e,value:e.val()},n,n.options),o=app.methods(n.onLoad);t(o,a)}),$("body").on("mouseenter","[data-on-enter]",function(e){var n=$(this),a=n.data(),o=$.extend({el:this,element:n,value:n.val()},a,a.options),i=app.methods(a.onEnter);t(i,o)}),$("body").on("mouseleave","[data-on-leave]",function(e){var n=$(this),a=n.data(),o=$.extend({el:this,element:n,value:n.val()},a,a.options),i=app.methods(a.onLeave);t(i,o)}),$("[data-on-keyup]").on("keyup",function(e){var n=$(this),a=n.data(),o=$.extend({element:n,value:n.val()},a,a.options),i=app.methods(a.onKeyup);t(i,o)}),$("body").on("focus","[data-on-focus]",function(e){var n=$(this),a=n.data(),o=$.extend({element:n,value:n.val()},a,a.options),i=app.methods(a.onFocus);t(i,o)}),$("body").on("change","[data-on-change]",function(e){var n=$(this),a=n.data(),o=$.extend({element:n,value:n.val()},a,a.options),i=app.methods(a.onChange);t(i,o)}),$("body").on("blur","[data-on-blur]",function(e){var n=$(this),a=n.data(),o=$.extend({element:n,value:n.val()},a,a.options),i=app.methods(a.onBlur);t(i,o)}),$("body").on("click","[data-click]",function(e){var n=$(this),a=n.data(),o=$.extend({el:this,element:n},a,a.options),i=app.methods(a.click);n.prop("disabled")||t(i,o)}),$("body").on("dblclick","[data-on-dblclick]",function(e){e.stopPropagation(),e.preventDefault();var n=$(this),a=n.data(),o=$.extend({el:this,element:n},a,a.options),i=app.methods(a.onDblclick);t(i,o)}),$("body").on("click","[data-on-click]",function(e){e.stopPropagation(),e.preventDefault();var n=$(this),a=n.data(),o=$.extend({el:this,element:n},a,a.options),i=app.methods(a.onClick);t(i,o)}),$("[data-on-submit]").on("submit",function(e){e.preventDefault();var n=$(this),a=n.data(),o=$.extend({self:this,element:n,iframe:n.attr("target")},a,n.data("options")),i=app.methods(a.onSubmit);t(i,o)})});